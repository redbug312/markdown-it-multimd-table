/*! markdown-it-multimd-table 4.2.3 https://github.com/redbug312/markdown-it-multimd-table @license MIT */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).markdownitMultimdTable=e()}(this,(function(){"use strict";function t(){this.__highest_alphabet__=0,this.__match_alphabets__={},this.__initial_state__=0,this.__accept_states__={},this.__transitions__={},this.__actions__={}}function e(t,e){const a=t.bMarks[e]+t.sCount[e],s=t.bMarks[e]+t.blkIndent,n=t.skipSpacesBack(t.eMarks[e],s),i=[];let l,r,o=!1,p=!1,c=0;for(l=a;l<n;l++)switch(t.src.charCodeAt(l)){case 92:o=!0;break;case 96:r=t.skipChars(l,96)-1,r>l?(p||(0===c?c=r-l:c===r-l&&(c=0)),l=r):(p||!o&&!c)&&(p=!p),o=!1;break;case 124:p||o||i.push(l),o=!1;break;default:o=!1}return 0===i.length||(i[0]>s&&i.unshift(s-1),i[i.length-1]<n-1&&i.push(n)),i}function a(t,e,a,s){const n={text:null,label:null},i=t.bMarks[s]+t.sCount[s],l=t.eMarks[s],r=t.src.slice(i,l).match(/^\[(.+?)\](\[([^[\]]+)\])?\s*$/);return!!r&&(!!e||(n.text=r[1],a.autolabel||r[2]?(n.label=r[2]||r[1],n.label=n.label.toLowerCase().replace(/\W+/g,""),n):n))}function s(t,a,s,n){const i={bounds:null,multiline:null},l=e(t,n);let r,o,p;return!(l.length<2)&&(!!a||(i.bounds=l,s.multiline&&(r=t.bMarks[n]+t.sCount[n],o=t.eMarks[n]-1,i.multiline=92===t.src.charCodeAt(o),i.multiline&&(p=t.eMarks[n],t.eMarks[n]=t.skipSpacesBack(o,r),i.bounds=e(t,n),t.eMarks[n]=p)),i))}function n(t,a,s){const n={aligns:[],wraps:[]},i=e(t,s),l=/^:?(-+|=+):?\+?$/;let r,o,p;if(t.sCount[s]-t.blkIndent>=4)return!1;if(0===i.length)return!1;for(r=0;r<i.length-1;r++){if(o=t.src.slice(i[r]+1,i[r+1]).trim(),!l.test(o))return!1;switch(n.wraps.push(43===o.charCodeAt(o.length-1)),p=(58===o.charCodeAt(0))<<4|58===o.charCodeAt(o.length-1-n.wraps[r]),p){case 0:n.aligns.push("");break;case 1:n.aligns.push("right");break;case 16:n.aligns.push("left");break;case 17:n.aligns.push("center")}}return!!a||n}function i(t,e,a){return t.isEmpty(a)}function l(e,l,r,o,p){const c=new t;let _,h,u,m,b,d,f,k,g,y,w,M,x,C,v,T=16,A=-1,S=[];if(r+2>o)return!1;const j=new l.Token("table_open","table",1);if(j.meta={sep:null,cap:null,tr:[]},c.set_highest_alphabet(65536),c.set_initial_state(65792),c.set_accept_states([65552,65553,0]),c.set_match_alphabets({65536:a.bind(this,l,!0,e),4096:n.bind(this,l,!0),256:s.bind(this,l,!0,e),16:s.bind(this,l,!0,e),1:i.bind(this,l,!0)}),c.set_transitions({65792:{65536:256,256:4352},256:{256:4352},4352:{4096:65552,256:4352},65552:{65536:0,16:65553},65553:{65536:0,16:65553,1:65552}}),e.headerless&&(c.set_initial_state(69888),c.update_transition(69888,{65536:4352,4096:65552,256:4352}),h=new l.Token("tr_placeholder","tr",0),h.meta={}),e.multibody||c.update_transition(65552,{65536:0,16:65552}),c.set_actions((function(t,i,o){switch(o){case 65536:if(j.meta.cap)break;j.meta.cap=a(l,!1,e,t),j.meta.cap.map=[t,t+1],j.meta.cap.first=t===r;break;case 4096:j.meta.sep=n(l,!1,t),j.meta.sep.map=[t,t+1],h.meta.grp|=1,T=16;break;case 256:case 16:h=new l.Token("tr_open","tr",1),h.map=[t,t+1],h.meta=s(l,!1,e,t),h.meta.type=o,h.meta.grp=T,T=0,j.meta.tr.push(h),e.multiline&&(h.meta.multiline&&A<0?A=j.meta.tr.length-1:!h.meta.multiline&&A>=0&&(_=j.meta.tr[A],_.meta.mbounds=j.meta.tr.slice(A).map((function(t){return t.meta.bounds})),_.map[1]=h.map[1],j.meta.tr=j.meta.tr.slice(0,A+1),A=-1));break;case 1:h.meta.grp|=1,T=16}})),!1===c.execute(r,o))return!1;if(!j.meta.tr.length)return!1;if(p)return!0;if(j.meta.tr[j.meta.tr.length-1].meta.grp|=1,j.map=d=[r,0],j.block=!0,j.level=l.level++,l.tokens.push(j),j.meta.cap){_=l.push("caption_open","caption",1),_.map=j.meta.cap.map;const t=[],e=j.meta.cap.first?"top":"bottom";null!==j.meta.cap.label&&t.push(["id",j.meta.cap.label]),"top"!==e&&t.push(["style","caption-side: "+e]),_.attrs=t,_=l.push("inline","",0),_.content=j.meta.cap.text,_.map=j.meta.cap.map,_.children=[],_=l.push("caption_close","caption",-1)}for(w=0;w<j.meta.tr.length;w++){for(m=new l.Token("td_th_placeholder","",0),h=j.meta.tr[w],16&h.meta.grp&&(k=256===h.meta.type?"thead":"tbody",_=l.push(k+"_open",k,1),_.map=f=[h.map[0],0],S=[]),h.block=!0,h.level=l.level++,l.tokens.push(h),M=0;M<h.meta.bounds.length-1;M++)if(y=[h.meta.bounds[M]+1,h.meta.bounds[M+1]],g=l.src.slice.apply(l.src,y),""!==g)if(e.rowspan&&S[M]&&"^^"===g.trim())b=S[M].attrGet("rowspan"),S[M].attrSet("rowspan",null===b?2:b+1),m=new l.Token("td_th_placeholder","",0);else{if(k=256===h.meta.type?"th":"td",_=l.push(k+"_open",k,1),_.map=h.map,_.attrs=[],j.meta.sep.aligns[M]&&_.attrs.push(["style","text-align:"+j.meta.sep.aligns[M]]),j.meta.sep.wraps[M]&&_.attrs.push(["class","extend"]),m=S[M]=_,e.multiline&&h.meta.multiline&&h.meta.mbounds){for(g=new Array(h.map[0]).fill("").concat([g.trimRight()]),x=1;x<h.meta.mbounds.length;x++)M>h.meta.mbounds[x].length-2||(y=[h.meta.mbounds[x][M]+1,h.meta.mbounds[x][M+1]],g.push(l.src.slice.apply(l.src,y).trimRight()));for(v=new l.md.block.State(g.join("\n"),l.md,l.env,[]),v.level=h.level+1,l.md.block.tokenize(v,h.map[0],v.lineMax),C=0;C<v.tokens.length;C++)l.tokens.push(v.tokens[C])}else _=l.push("inline","",0),_.content=g.trim(),_.map=h.map,_.level=h.level+1,_.children=[];_=l.push(k+"_close",k,-1)}else u=m.attrGet("colspan"),m.attrSet("colspan",null===u?2:u+1);l.push("tr_close","tr",-1),1&h.meta.grp&&(k=256===h.meta.type?"thead":"tbody",_=l.push(k+"_close",k,-1),f[1]=h.map[1])}return d[1]=Math.max(f[1],j.meta.sep.map[1],j.meta.cap?j.meta.cap.map[1]:-1),_=l.push("table_close","table",-1),l.line=d[1],!0}return t.prototype.set_highest_alphabet=function(t){this.__highest_alphabet__=t},t.prototype.set_match_alphabets=function(t){this.__match_alphabets__=t},t.prototype.set_initial_state=function(t){this.__initial_state__=t},t.prototype.set_accept_states=function(t){for(let e=0;e<t.length;e++)this.__accept_states__[t[e]]=!0},t.prototype.set_transitions=function(t){this.__transitions__=t},t.prototype.set_actions=function(t){this.__actions__=t},t.prototype.update_transition=function(t,e){this.__transitions__[t]=Object.assign(this.__transitions__[t]||Object(),e)},t.prototype.execute=function(t,e){let a,s,n;for(a=this.__initial_state__,s=t;a&&s<e;s++){for(n=this.__highest_alphabet__;n>0&&!(a&n&&this.__match_alphabets__[n].call(this,s,a,n));n>>=4);if(this.__actions__(s,a,n),0===n)break;a=this.__transitions__[a][n]||0}return!!this.__accept_states__[a]},function(t,e){const a=t.utils.assign({},{multiline:!1,rowspan:!1,headerless:!1,multibody:!0,autolabel:!0},e||{});t.block.ruler.at("table",l.bind(null,a),{alt:["paragraph","reference"]})}}));
